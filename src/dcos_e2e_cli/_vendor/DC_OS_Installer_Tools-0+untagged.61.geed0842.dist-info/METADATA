Metadata-Version: 2.1
Name: DC-OS-Installer-Tools
Version: 0+untagged.61.geed0842
Summary: Get information from DC/OS installers.
Home-page: https://github.com/adamtheturtle/dcos-installer-tools
Author: Adam Dangoor
Author-email: adangoor@mesosphere.com
License: Apache License 2.0
Keywords: dcos
Platform: UNKNOWN
Classifier: Operating System :: POSIX
Classifier: Environment :: Web Environment
Classifier: Programming Language :: Python :: 3.5
Classifier: License :: OSI Approved :: Apache License 2.0
Provides-Extra: dev
Requires-Dist: PyYAML (==4.2b4); extra == 'dev'
Requires-Dist: Pygments (==2.2.0); extra == 'dev'
Requires-Dist: autoflake (==1.2); extra == 'dev'
Requires-Dist: check-manifest (==0.37); extra == 'dev'
Requires-Dist: click (==7.0); extra == 'dev'
Requires-Dist: doc8 (==0.8.0); extra == 'dev'
Requires-Dist: flake8-commas (==2.0.0); extra == 'dev'
Requires-Dist: flake8-quotes (==1.0.0); extra == 'dev'
Requires-Dist: flake8 (==3.6.0); extra == 'dev'
Requires-Dist: isort (==4.3.4); extra == 'dev'
Requires-Dist: mypy (==0.641); extra == 'dev'
Requires-Dist: pip-check-reqs (==2.0.3); extra == 'dev'
Requires-Dist: py (==1.7.0); extra == 'dev'
Requires-Dist: pydocstyle (==3.0.0); extra == 'dev'
Requires-Dist: pyenchant (==2.0.0); extra == 'dev'
Requires-Dist: pygithub (==1.43.2); extra == 'dev'
Requires-Dist: pylint (==2.1.1); extra == 'dev'
Requires-Dist: pyroma (==2.4); extra == 'dev'
Requires-Dist: pytest-cov (==2.6.0); extra == 'dev'
Requires-Dist: requests (==2.20.0); extra == 'dev'
Requires-Dist: vulture (==1.0); extra == 'dev'
Requires-Dist: yapf (==0.24.0); extra == 'dev'

|Build Status|

|codecov|

DC/OS Installer Tools
=====================

A DC/OS installer provides the following interface:

.. code:: console

   $ bash dcos_generate_config.sh --version
   Extracting image from this script and loading into docker daemon, this step can take a few minutes
   x dcos-genconf.75af9b2571de95e074-c74aa914537fa9f81b.tar
   Loaded image: mesosphere/dcos-genconf:75af9b2571de95e074-c74aa914537fa9f81b
   {
     "variant": "",
     "version": "1.12.0-rc3"
   }
   $ bash dcos_generate_config.sh --version
   {
     "variant": "",
     "version": "1.12.0-rc3"
   }

For DC/OS Enterprise installers, the ``"variant"`` key is set to ``"ee"``.

This is a Python library for collecting the outputted information from the installer.

Installation
------------

.. code:: console

   pip install git+https://github.com/adamtheturtle/dcos-installer-tools.git

Usage
-----

.. code:: python

   from pathlib import Path

   from dcos_installer_tools import DCOSVariant, get_dcos_installer_details

   installer = Path('/Users/Eleanor/Documents/dcos_generate_config.sh')
   details = get_dcos_installer_details(installer=installer)
   assert details.version == '1.12'
   assert details.variant == DCOSVariant.OSS
   assert details.variant != DCOSVariant.ENTERPRISE

Determining details about the artifact requires extracting the artifact.
Extracting the artifact requires over a gigabyte of space in a workspace directory.
By default, this directory is the result of ``tempfile.gettempdir()``.
It is possible to use the ``workspace_dir`` parameter of ``get_dcos_installer_details`` to set a workspace directory ``pathlib.Path``.

By default, the extracted artifact is removed.
Set the ``keep_extracted`` parameter to of ``get_dcos_installer_details`` to ``True`` to keep the extracted artifact.
This will be in the same directory as the given ``installer``.

Exceptions
~~~~~~~~~~

* ``ValueError``: A space was in the path to the artifact.
  See `DCOS_OSS-4429 <https://jira.mesosphere.com/browse/DCOS_OSS-4429>`_.
* ``CalledProcessError``: An error was encountered when extracting the given artifact.

.. |Build Status| image:: https://travis-ci.com/adamtheturtle/dcos-installer-tools.svg?branch=master
   :target: https://travis-ci.com/adamtheturtle/dcos-installer-tools
.. |codecov| image:: https://codecov.io/gh/adamtheturtle/dcos-installer-tools/branch/master/graph/badge.svg
   :target: https://codecov.io/gh/adamtheturtle/dcos-installer-tools


